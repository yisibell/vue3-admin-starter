import{d as C,u as N,e as U,g as y,r as p,h as B,i as w,c as S,a as h,b as e,w as o,E as R,o as j,j as z,k as F,s as K,l as M,m as Q,n as T,p as O,q as P,t as A,v as D,x as G,y as H,_ as J}from"./index-Hn1QL0FG.js";/* empty css                *//* empty css                 */const W=n=>(G("data-v-6c6a1697"),n=n(),H(),n),X={class:"login-container"},Y={class:"login-form-wrapper"},Z=W(()=>h("div",{class:"login-card-header"},"系统登录",-1)),$=C({name:"LoginView",__name:"Login",setup(n){const _=N(),m=U(),V=y(()=>_.query.redirect),k=y(()=>x(_.query)),a=p({username:"",password:""}),E={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},f=p(),{setToken:g}=B(),d=p(!1),v=()=>{var r;(r=f.value)==null||r.validate(async s=>{if(s){if(K.anonymousMode){g(""),m.push("/");return}try{d.value=!0;const{status:t,data:l,message:u}=await M(a.value);t===200?(g(l),m.push({path:V.value||"/",query:k.value})):Q({message:u,type:"error"})}finally{d.value=!1}}})},x=r=>Object.keys(r).reduce((s,t)=>(t!=="redirect"&&(s[t]=r[t]),s),{});return(r,s)=>{const t=w("User"),l=T,u=O,c=P,I=w("Lock"),L=A,b=D,q=R;return j(),S("div",X,[h("div",Y,[e(q,null,{default:o(()=>[Z,e(b,{ref_key:"formVNode",ref:f,model:a.value,rules:E,size:"large"},{default:o(()=>[e(c,{prop:"username"},{default:o(()=>[e(u,{modelValue:a.value.username,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value.username=i)},{prefix:o(()=>[e(l,null,{default:o(()=>[e(t)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"password"},{default:o(()=>[e(u,{modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value.password=i),type:"password","show-password":"",onKeyup:z(v,["enter"])},{prefix:o(()=>[e(l,null,{default:o(()=>[e(I)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:o(()=>[e(L,{type:"primary",size:"large",style:{width:"100%"},loading:d.value,onClick:v},{default:o(()=>[F(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),te=J($,[["__scopeId","data-v-6c6a1697"]]);export{te as default};
